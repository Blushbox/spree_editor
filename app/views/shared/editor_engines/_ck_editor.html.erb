<%= javascript_include_tag('ckeditor/init') %>

<script type="text/javascript">
  $(function() {
    var ids = [<%= raw ids.map{|id| "'#{id}'"}.join(', ') %>];
    for(var key in ids){
      if($('#' + ids[key]).length > 0){
        
        // styles dropdown
        CKEDITOR.stylesSet.add( 'my_styles', [
            { 
              name: 'Image - Float Left', 
              element: 'img', 
              attributes: { 
                'class': 'float-left' 
              } 
            },
            { 
              name: 'Image - Float Right', 
              element: 'img', 
              attributes: { 
                'class': 'float-right' 
              } 
            }
        ]);   

        CKEDITOR.replace(ids[key], {
          // custom config: http://ckeditor.com/latest/samples/plugins/toolbar/toolbar.html
          stylesSet: 'my_styles',
          toolbar: [
            { 
              name: 'links', 
              items: [ 'Link', 'Unlink' ] 
            },
            { 
              name: 'insert', 
              items: [ 'Image', 'Table' ] 
            },
            { 
              name: 'basicstyles', 
              groups: [ 'basicstyles', 'cleanup' ], 
              items: [ 'Bold', 'Italic' ] 
            },
            { 
              name: 'paragraph', 
              groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], 
              items: [ 'NumberedList', 'BulletedList', '-', 'Blockquote' ] 
            },
            { 
              name: 'styles', 
              items: [ 'Styles' ] 
            },
            { 
              name: 'document', 
              groups: [ 'mode', 'document', 'doctools' ], items: [ 'Source' ] 
            },            
          ]
        }); 
      }
    }

  });
</script>